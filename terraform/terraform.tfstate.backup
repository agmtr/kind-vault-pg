{
  "version": 4,
  "terraform_version": "1.4.3",
  "serial": 64,
  "lineage": "f8775dac-aa43-9620-e6af-393991e594ae",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "vault_auth_backend",
      "name": "kubernetes",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "accessor": "auth_kubernetes_d4e6bf0a",
            "description": "",
            "disable_remount": false,
            "id": "kubernetes",
            "local": false,
            "namespace": null,
            "path": "kubernetes",
            "tune": [],
            "type": "kubernetes"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_database_secret_backend_role",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "pg",
            "creation_statements": [
              "CREATE ROLE \"{{name}}\" WITH LOGIN PASSWORD '{{password}}' VALID UNTIL '{{expiration}}';",
              "GRANT SELECT ON ALL TABLES IN SCHEMA public TO \"{{name}}\";"
            ],
            "db_name": "pg",
            "default_ttl": 60,
            "id": "pg/roles/app",
            "max_ttl": 300,
            "name": "app",
            "namespace": null,
            "renew_statements": [],
            "revocation_statements": [],
            "rollback_statements": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vault_database_secrets_mount.pg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_database_secrets_mount",
      "name": "pg",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accessor": "database_20b0a0bf",
            "allowed_managed_keys": [],
            "audit_non_hmac_request_keys": [],
            "audit_non_hmac_response_keys": [],
            "cassandra": [],
            "couchbase": [],
            "default_lease_ttl_seconds": 0,
            "description": "",
            "elasticsearch": [],
            "engine_count": 1,
            "external_entropy_access": false,
            "hana": [],
            "id": "pg",
            "influxdb": [],
            "local": false,
            "max_lease_ttl_seconds": 0,
            "mongodb": [],
            "mongodbatlas": [],
            "mssql": [],
            "mysql": [],
            "mysql_aurora": [],
            "mysql_legacy": [],
            "mysql_rds": [],
            "namespace": null,
            "options": {},
            "oracle": [],
            "path": "pg",
            "postgresql": [
              {
                "allowed_roles": [
                  "app"
                ],
                "connection_url": "postgresql://{{username}}:{{password}}@demo-cluster-rw.default:5432/postgres",
                "data": {},
                "disable_escaping": false,
                "max_connection_lifetime": 0,
                "max_idle_connections": 0,
                "max_open_connections": 2,
                "name": "pg",
                "password": "",
                "plugin_name": "postgresql-database-plugin",
                "root_rotation_statements": [],
                "username": "postgres",
                "username_template": "",
                "verify_connection": true
              }
            ],
            "redis": [],
            "redis_elasticache": [],
            "redshift": [],
            "seal_wrap": false,
            "snowflake": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_kubernetes_auth_backend_role",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alias_name_source": "serviceaccount_uid",
            "audience": null,
            "backend": "kubernetes",
            "bound_service_account_names": [
              "app"
            ],
            "bound_service_account_namespaces": [
              "default"
            ],
            "id": "auth/kubernetes/role/app",
            "namespace": null,
            "role_name": "app",
            "token_bound_cidrs": null,
            "token_explicit_max_ttl": 0,
            "token_max_ttl": 0,
            "token_no_default_policy": false,
            "token_num_uses": 0,
            "token_period": 0,
            "token_policies": [
              "app"
            ],
            "token_ttl": 3600,
            "token_type": "default"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "vault_auth_backend.kubernetes"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_mount",
      "name": "kvv2",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accessor": "kv_99b9e431",
            "allowed_managed_keys": [],
            "audit_non_hmac_request_keys": [],
            "audit_non_hmac_response_keys": [],
            "default_lease_ttl_seconds": 0,
            "description": "KV Version 2 secret engine mount",
            "external_entropy_access": false,
            "id": "kvv2",
            "local": false,
            "max_lease_ttl_seconds": 0,
            "namespace": null,
            "options": {
              "version": "2"
            },
            "path": "kvv2",
            "seal_wrap": false,
            "type": "kv"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "vault_policy",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/vault\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "app",
            "name": "app",
            "namespace": null,
            "policy": "path \"pg/creds/app\" {\n  capabilities = [\"read\"]\n}\n"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": null
}
